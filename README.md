<!--
This README was generated by Claude (Anthropic) and slightly edited by me.
I specifically asked Claude to make it with this emoji-heavy vibe
because that's how I roll (around) 🩷✨😭
-->

# Stow: GNU Stow-like Symlink Farm Manager

> *A performance-focused, feature-rich alternative to GNU Stow written in pure Bash* 🫠

## 🌸 What is this?

This is a blazingly fast symlink farm manager that replicates and extends GNU Stow functionality. Perfect for managing dotfiles, configurations, and any directory structure you want to symlink efficiently across your system.

## ✨ Features

- 🔥 **Lightning fast** - Pure Bash implementation with optimized algorithms
- 🩵 **GNU Stow like** - Drop-in replacement with extended functionality
- 💜 **Advanced ignore patterns** - Regex-based filtering with dynamic ignore scripts
- 🩷 **Dotfile transformation** - Intelligent `dot-` prefix handling
- ❄️ **Simulation mode** - Preview changes before applying them
- 🌸 **Force mode** - Handle conflicts gracefully when needed
- 💢 **Comprehensive logging** - 6-level logging system with colored output
- 🥰 **Clean broken links** - Automatically removes orphaned symlinks (on unstow)

## 🚀 Quick Start

```bash
# Stow current folder to parent (default paths)
./stow -S

# Delete/unstow packages
./stow -D helix

# Restow (delete then stow)
./stow -R -t /home/ari dotf

# Custom stow and target directories
./stow -d /usr/local/stow -t /usr/local emacs
```

## 🎯 Command Reference

### Basic Actions
- `-S, --stow` - Stow packages
- `-D, --delete` - Delete/unstow packages
- `-R, --restow` - Restow (delete then stow)

### Directory Control
- `-t, --target <dir>` - Set target directory (default: parent of stow dir)
- `-d, --dir <dir>` - Set stow directory (default: current directory)

### Advanced Options
- `-v, --verbose [0-5]` - Set verbosity level (stackable: `-vv`, `-vvv`, overflows starting on 4)
- `-n, --simulate` - Preview mode - show what would be done
- `-F, --force` - Force operations, remove conflicts
- `--dotfiles` - Enable dotfile transformation (`dot-vimrc` → `.vimrc`)

### Filtering & Ignoring
- `--ignore <regex>` - Ignore files matching regex pattern
- `-f, --filter <script>` - Run bash script and use output as additional ignore patterns

## 🎨 Advanced Usage

### Dotfile Management 💙
```bash
# Enable dotfile transformation
./stow --dotfiles dotfiles

# Files named "dot-bashrc" become ".bashrc" in target
# Perfect for version control where you can't have dot-prefixed files
```

### Ignore Patterns 🥹
Create a `.stow-ignore` file in your stow directory:
```
# Ignore all .git directories
\.git$

# Ignore backup files
.*~$

# Ignore README files
README.*$
```

### Dynamic Filtering 🔥
```bash
# Use a bash script to generate ignore patterns (-f <script>)
./stow -Rf ./generate-ignores.sh config
```

The script output will be treated as additional .stow-ignore regex, empty lines or comments aren't filtered as in .stow-ignore

```bash
# do not include fish config if not installed
command -v fish > /dev/null || printf '^\.config/fish.*\n'
```

### Simulation Mode 🔍

```bash
# See exactly what would happen without making changes
./stow -Sn -v config nvim

# Perfect for testing complex operations
./stow -Rn --dotfiles --force dotfiles
```

## 🛠️ Environment Variables

- `LOGGER_LEVEL` - Default logging level (0-5)
- Set via `-v` flag or export in shell

## 📁 Directory Structure Example

```
dotfiles/                   # Stow directory
├── .stow-ignore            # Ignore patterns
├── nvim/                   # Package
│   └── .config/
│       └── nvim/
│           ├── init.lua
│           └── lua/
└── shell/                  # Another package
    ├── dot-bashrc          # Becomes ~/.bashrc with --dotfiles
    └── dot-zshrc           # Becomes ~/.zshrc with --dotfiles
```

After `./stow --dotfiles nvim shell`:
```
~/
├── .bashrc -> dotfiles/shell/dot-bashrc
├── .zshrc -> dotfiles/shell/dot-zshrc
└── .config/
    └── nvim/
        ├── init.lua -> dotfiles/nvim/.config/nvim/init.lua
        └── lua/ -> dotfiles/nvim/.config/nvim/lua/
```

## 🎵 Logging Levels

| Level | Name  | Color | Description |
|-------|-------|-------|-------------|
| 0 | OFF | - | No output |
| 1 | CRIT | Red FG | Critical errors |
| 2 | ERROR | Red | Errors |
| 3 | WARN | Yellow | Warnings |
| 4 | INFO | Blue | General info (default) |
| 5 | DEBUG | Green | Detailed operations |

## 🌟 Performance Notes

- **Zero external dependencies** - Pure Bash, runs everywhere
- **Optimized file operations** - Minimal syscalls and efficient tree traversal
- **Memory efficient** - Streams file operations, handles large directory trees
- **Assembly-level attention to detail** - Every operation is carefully crafted for speed

## 💜 Why This Implementation?

I wanted to use GNU Stow for managing my dotfiles, so I installed it via `pacman`. I got **Perl**, a bunch of dependencies, and **stow**, and... it didn't even work! There was a error around line 253 (some operator precedence issue, or syntax, I don't remember correctly), and I had to `sudo vim /usr/bin/stow` to manually add parentheses to fix it 🫠

That felt wrong. Really wrong.

So I tried making a custom install script to avoid the mess, but that just created a different kind of mess. Eventually I thought: "I can write stow in pure Bash and just have it working!" 🤪

This isn't just another stow clone (it is). Every function is optimized, every operation is purposeful. The code itself is structured as clean, maintainable that happens to be incredibly fast.

**Zero dependencies. Zero Perl. Zero broken syntax. Just pure, optimized Bash that works.** ✨

Perfect for Arch Linux users, terminal lovers, and anyone who appreciates when low-level optimization meets elegant functionality 🤟🏻

## 🥺 Issues & Support

If you encounter any bugs or have feature requests, feel free to open an issue! This helps keep the project clean and focused 💜

## 📜 License

MIT License - free and open source ✨

---

*Made with 🩷 for the terminal-loving, performance-obsessed, dotfile-managing community*

**"Code must be ~~art~~, functional, and the most polished experience"** ✨
